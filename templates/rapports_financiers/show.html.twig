{% extends 'base.html.twig' %}

{% block title %}RapportsFinanciers{% endblock %}

{% block body %}
    {{ include('components/_title.html.twig', { content: 'Rapports financier ' ~ rapports_financier.id}) }}

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mx-auto my-4">
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
                {{ include('components/SVG/_rapport_financier_SVG.html.twig') }}
                Information Rapport financier
            </h2>
            <ul class="space-y-1">
                <li class="flex">
                    <span class="font-semibold text-gray-900 dark:text-white w-40">Id :</span> 
                    <span>{{ rapports_financier.id }}</span>
                </li>
                <li class="flex">
                    <span class="font-semibold text-gray-900 dark:text-white w-40">Date de creation :</span> 
                    <span>{{ rapports_financier.getCreatedAt() ? rapports_financier.getCreatedAt()|date('d/m/Y') : '' }}</span>
                </li>
                <li class="flex">
                    <span class="font-semibold text-gray-900 dark:text-white w-40">Date de début :</span> 
                    <span>{{ rapports_financier.getStartDate()|date('d/m/Y') }}</span>
                </li>
                <li class="flex">
                    <span class="font-semibold text-gray-900 dark:text-white w-40">Date de fin :</span> 
                    <span>{{ rapports_financier.getEndDate()|date('d/m/Y') }}</span>
                </li>
                <li class="flex">
                    <span class="font-semibold text-gray-900 dark:text-white w-40">Total HT :</span> 
                    <span>{{ rapports_financier.totalHt }} €</span>
                </li>
                <li class="flex">
                    <span class="font-semibold text-gray-900 dark:text-white w-40">Total TTC :</span> 
                    <span>{{ rapports_financier.totalTTc }}</span>
                </li>
            </ul>
        </div>

        <div>
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
                <svg class="w-4 h-4 text-gray-600 dark:text-gray-300 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h1l1-5h10l1 5h1m-6 4h.01M13 16H7m-2 0h1m10 0h1m-6 4H6m2 0h8"></path>
                </svg>
                Liste des Factures
            </h2>
            <table class="min-w-full bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg">
                <thead class="bg-gray-50 dark:bg-gray-700">
                    <tr>
                        <th class="px-4 py-2 border-b border-gray-200 dark:border-gray-600 text-left text-xs font-medium text-gray-500 dark:text-gray-200 uppercase tracking-wider">Date</th>
                        <th class="px-4 py-2 border-b border-gray-200 dark:border-gray-600 text-left text-xs font-medium text-gray-500 dark:text-gray-200 uppercase tracking-wider">Prix HT</th>
                        <th class="px-4 py-2 border-b border-gray-200 dark:border-gray-600 text-left text-xs font-medium text-gray-500 dark:text-gray-200 uppercase tracking-wider">Prix TTC</th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-800">
                    {% for ligne_facture in rapports_financier.getLignesFactures() %}
                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                            <td class="px-4 py-2 border-b border-gray-200 dark:border-gray-600">{{ ligne_facture.getCreatedAtFacture()|date('d/m/Y') }}</td>
                            <td class="px-4 py-2 border-b border-gray-200 dark:border-gray-600">{{ ligne_facture.getTotalHt() }}</td>
                            <td class="px-4 py-2 border-b border-gray-200 dark:border-gray-600">{{ ligne_facture.getTotalTtc() }} €</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    {{ include('components/_link.html.twig', {
        content: 'Retour à la liste',
        path: 'app_rapports_financiers_index'
    }) }}

    {% if is_granted('ROLE_COMPTABLE') %}
        {{ include('components/_link.html.twig', {
            content: 'Modifier le rapport financier',
            path: 'app_rapports_financiers_edit',
            id: rapports_financier.id
        }) }}

        {{ include('components/_delete_form.html.twig', {
            item_id: rapports_financier.id,
            path: 'rapports_financiers',
            labelButton: 'Supprimer le rapport financier',
            title: "Suppression du rapport financier : " ~ rapports_financier.id,
            content: "Êtes-vous sûr de vouloir supprimer ce rapport financier ?",
            classButton: 'block font-medium text-blue-600 dark:text-blue-500 hover:underline'
        }) }}
    {% endif %}
{% endblock %}
