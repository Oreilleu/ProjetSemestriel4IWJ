{% extends 'base.html.twig' %}

{% block title %}Liste des entreprises {% endblock %}

{% block body %}
    {{ include('components/_title.html.twig', { content: 'Liste des entreprises'}) }}

    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-primary-100 font-title">
        <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#id
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Nom
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Adresse
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Téléphone
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Email
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Siret
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Date de création
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Actions
            </th>
        </tr>
        </thead>
        <tbody class="divide-y divide-gray-200 bg-color3-50 font-subtitle">
        {% for entreprise in entreprises %}
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ entreprise.id }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ entreprise.nom }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ entreprise.adresse }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ entreprise.tel }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ entreprise.email }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ entreprise.numeroSiret }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ entreprise.createdAt ? entreprise.createdAt|date('Y-m-d H:i:s') : '' }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium flex space-x-4">
                    <a href="/admin/entreprises/{{ entreprise.id }}/edit">
                        <button class="border-0 py-2 px-8 hover:bg-primary-600 rounded">
                            {{ include('components/SVG/_update_SVG.html.twig') }}
                        </button>
                    </a>
                    {{ include('components/_delete_form.html.twig', {
                        item_id: entreprise.id,
                        path: 'entreprises',
                        labelButton: include('components/SVG/_delete_SVG.html.twig'),
                        title: "Suppression de l'entreprise : " ~ entreprise.nom,
                        content: "Êtes-vous sûr de vouloir supprimer cette entreprise ?",
                        classButton: 'border-0 py-2 px-8 hover:bg-primary-600 rounded'
                    }) }}
                </td>
            </tr>
        {% else %}
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" colspan="4">Aucune entreprise trouvée</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
